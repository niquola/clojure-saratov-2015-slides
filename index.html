<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>clojure</title>

<meta name="description" content="Presentation about clojure">
<meta name="author" content="Nikolay Ryzhikov">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/white.css" id="theme">

<!-- Code syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

<!-- Printing and PDF exports -->
<script>
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>

<!--[if lt IE 9]><script src="lib/js/html5shiv.js"></script><![endif]-->
<style>

 @font-face {
  font-family: Fira;
  src: url(fira.ttf);
}
body {
  font-family: Fira !important;
}
.reveal pre {
  border: 1px solid #ccc;
  box-shadow: none !important;
}
.reveal pre code {
  font-family: Fira;
  background: white !important;
  color: black;
  /*padding: 30px;*/
  border: none !important;
  box-shadow: none !important;
}
img {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}
</style>
</head>

<body>

<div class="reveal">
  <div class="slides">
    <section>
      <h3>(clojure)</h3>
      <hr/>
      <p><small>Created by <a href="http://github.com/niquola">niquola</a> / <a href="http://twitter.com/niquola">@niquola</a></small></p>
    </section>

    <section>
      <h5>
        Nikolay Ryzhikov
        <img src="healthsamurai.png" style="margin: 0; height: 40px; border:none; background:transparent;box-shadow: none;"/>
        <br/>
        <a href="http://github.com/niquola">
          <i class="fa fa-github"></i>
        </a>
        <a href="http://twitter.com/niquola">
          <i class="fa fa-twitter"></i>
        </a>
        <a href="https://plus.google.com/u/0/+%D0%9D%D0%B8%D0%BA%D0%BE%D0%BB%D0%B0%D0%B9%D0%A0%D1%8B%D0%B6%D0%B8%D0%BA%D0%BE%D0%B2">
          <i class="fa fa-google-plus"></i>
        </a>
        <a href="https://www.facebook.com/nicola.ryzhikov">
          <i class="fa fa-facebook"></i>
        </a>
      </h5>
        <img src="niquola.jpg" style="border:none; width: 70%; box-shado: none; background: transparent;"/>
      <hr/>
    </section>

    <section data-markdown><script type="text/template">
      ![](./clojure.png)
    </script></section>

    <section data-markdown><script type="text/template">
     Why learn yet another lang?
    </script></section>

    <section data-markdown><script type="text/template">
    ### Effectivnes
    ----

    do more with less
    </script></section>

    <section data-markdown><script type="text/template">
     Why learn functional lang?
    </script></section>

    <section data-markdown><script type="text/template">
    * simplicity
    * expressivnes
    * reuse
    * reliability
    * concurrency
    </script></section>

    <section data-markdown><script type="text/template">
    ```js
    var coll = [1, 2, 3, 4, 5, 6];
    var acc = [];

    for(var i = 0; i< coll.length && acc.length < 3; i++){
     if(i%2 == 1){
      acc.push(coll[i] + 1)
     }
    }

    ```
    </script></section>

    <section data-markdown><script type="text/template">
    ```js
    var inc = function(x){ return x + 1; }
    var odd = function(x){ return x%2 == 1; }

    acc = [1, 2, 3, 4, 5, 6].map(inc).filter(odd).take(2);
    ```
    </script></section>

    <section data-markdown><script type="text/template">
     Which functional lang?
    </script></section>

    <section data-markdown><script type="text/template">
    * haskell
    * ocaml/F#
    * erlang
    * scala
    * **clojure**
    </script></section>


    <section data-markdown><script type="text/template">
      ### Clojure
      ------

      * Academi (AI)
      * Enterprise (JVM)
      * Hipster (Web)
    </script></section>

    <section data-markdown><script type="text/template">
    ### How to start
    ### with clojure?
    </script></section>

    <section data-markdown><script type="text/template">
    1. presentation
    1. books
    1. env
    1. pet projects
    1. small projects
    </script></section>

    <section data-markdown><script type="text/template">
    ### What is clojure?
    </script></section>


    <section data-markdown><script type="text/template">
      1. functional
      1. LISP
      1. on JVM
      1. for concurrency
      1. by Rich Hickey
    </script></section>

  <section data-markdown><script type="text/template">
  What is LISP?
  </script></section>

  <section data-markdown><script type="text/template">
  ### John MacCarthy 1958

  ---
  * if
  * garbage collection
  * closure
  * CLOS -> smalltalk
  </script></section>

  <section data-markdown><script type="text/template">
  * hardware abstracton - C
  * math application - LISP
  </script></section>

  <section data-markdown><script type="text/template">
  ### primitives

  ```clojure
  (= (type nil) nil)

  (= (type 100) java.lang.Long)

  (= (type 0.1) java.lang.Double)

  (= (type "hi") java.lang.String)

  (= (type #"^a.*") java.util.regex.Pattern)

  (= (type :orange) clojure.lang.Keyword)

  (= (type 'apple) clojure.lang.Symbol)
  ```
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
  ```clojure
  (= (type '(1 2 3))
     clojure.lang.PersistentList)

  (= (type [1 2 3])
     clojure.lang.PersistentVector)

  (= (type {:a 1 :b 2})
     clojure.lang.PersistentArrayMap)

  (= (type #{1 2 3})
     clojure.lang.PersistentHashSet)
  ```
  </script>
  </section>

  <section data-markdown><script type="text/template">
  Syntax?
  </script></section>

  <section data-markdown>
  <script type="text/template">

### (ast)
```js
function myfn(x,y)  | ["function", "myfn",
{                   |  ["x", "y"],
  return            |   ["+",
    x*x + y*y;      |    ["*", "x", "x"],
}                   |    ["*", "y", "y"]]]
                    |
myfn(3,6)           | ["myfn", "3", "6"]

```
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">

### (ast)

```js
["function", "myfn",  |  [function myfn
 ["x", "y"],          |    [x y]
 ["+",                |    [+
   ["*", "x", "x"],   |      [* x x]
   ["*", "y", "y"]]]  |      [* y y]]]
                      |
["myfn", "3", "6"]    |  [myfn 3 6]

```
  </script></section>

  <section data-markdown><script type="text/template">

## (hello clojure)

```clojure
[function myfn [x y]  |  (defn myfn [x y]
  [+ [* x x]          |    (+ (* x x)
     [* y y]]]        |       (* y y)))
                      |
[myfn 3 6]            |   (myfn 3 6)

```
  </script>
  </section>

  <section data-markdown><script type="text/template">
## punctuation
```javascript
function myfn(x,y){  | (defn myfn [x y]
 return  x*x + y*y;  |   (+ (* x x)
};                   |      (* y y)))
                     |
myfn(3,6)            | (myfn 3 6)
// 12 [{;,}]         | ;; 12 ([])

```
  </script>
  </section>

  <section data-markdown><script type="text/template">
## manipulate ast

![](paredit.gif)
  </script></section>

  <section data-markdown>
  <script type="text/template">
## (forms & s-expressions)
```clojure
(special-form args)

(function-call args)

(macros-call args)
 ```

just lists
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
## (special-forms)
```clojure
(def symbol init?)
(if test then else?)
(do exprs*)
(let [bindings* ] exprs*)
(quote form)
(var symbol)
(fn name? [params* ] exprs*)
(loop [bindings* ] exprs*)
(recur exprs*)
(throw expr)
(try expr* catch-clause* finally-clause?)
```
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
### (defn functions)
```clojure
(defn inc [x] (+ 1 x)) ;; (def inc (fn [x] ..))
(myfn 1 2)

(defn bar
  "doc string?" ;; embed doc
  ([a b] ...)   ;; multi arity
  ([a b c] ...)

(defn constrained-fn [f x]
  {:pre  [(pos? x)]       ;; pre & post conditions
   :post [(= % (* 2 x))]} ;; contracts
  (f x))

(defn myfn [{a :a}] ;; destructuring
  ...)

```
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
  ## (homoiconicity)
  -----
  ### (= CODE DATA)
  ---
  ## meta-programming
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
## (defmacro macros)
```

(defmacro unless [pred f1 f2]
  (list 'if (list 'not pred) f1 f2))

(defmacro unless [pred f1 f2]
 `(if (not (~pred)) ~f1 ~f2))

(unless (> 5 (rand 10))
  "ok"
  "not ok"))

(if (not (> 5 (rand 10)))
  "ok"
  "not ok"))
```
  </script>
  </section>

  <section data-markdown>
  <script type="text/template">
### (most of useful forms)
```clojure
(defn myfn [args] body) ;; (def myfn (fn []..))

(cond pred1 expr1  ;; (if pred1 expr (cond ...))
      pred2 expr2)

(for [x xs] (* x x)) ;; (loop [...

(doseq [x xs] (println x)) ;; (loop [..
```
  </script>
  </section>


    <section data-markdown><script type="text/template">
      ## Functional
      ## Programming?
    </script></section>

    <section data-markdown><script type="text/template">
      ## чистые функции
      ---
      &

      ---

      ### функции высших порядков
    </script></section>

    <section data-markdown><script type="text/template">
      ### чистые функции
      ---

      * теже параметры - тотже ответ
      * на других не влияет

      ---

      ## sin(&#960;/2) => 1
    </script></section>

    <section data-markdown><script type="text/template">
      ### чистые функции
      ---

      оперируют значениями (value)
    </script></section>

    <section data-markdown><script type="text/template">
      ### значение
      ---
      * неизменное
      * чистая идея
      * операция порождают новое значение

    </script></section>

    <section data-markdown><script type="text/template">
      ### чистые функции: свойства
      ---

      * на них можно расчитывать
      * легко предсказуемы
      * не злопамятны
    </script></section>

    <section data-markdown><script type="text/template">
```js
function fullName(first, middle, last){
   return first
   + (middle[0] ? ( ' ' + middle[0]) : '')
   + ','
   + last;
}

fullName('Nicola', 'Nikolaevich', 'Ryzhikov')
//=> Nicola N. Ryzhikov
```
    </script></section>

    <section data-markdown><script type="text/template">
      ### чистые функции: свойства
      ---

      * легко понимать  (простота)
      * легко тестировать (надежность)
      * легко параллелить  (share nothing)
      * легко переиспользовать (reuse)
      * откладывать выполнение (ленивость)
    </script></section>

    <section data-markdown><script type="text/template">
      ### чистые функции:
      ---
      #### идеальные компоненты

      никаких скрытых зависимостей

      все явно

      ---

      [out of the tar pit](http://shaffner.us/cs/papers/tarpit.pdf)
    </script></section>

    <section data-markdown><script type="text/template">
      #### Ну с числами и строчками понятно

      ### А массивы, словари?
    </script></section>

    <section data-markdown><script type="text/template">
### Копировать?
```js
function myfn(somearray){
   var copy = somearray.clone()
   return copy.push('ups');
}
```
    </script></section>

    <section data-markdown><script type="text/template">
Персистентные

структуры данных O(1)

---

fixed price cpu/memory
    </script></section>

    <section data-markdown><script type="text/template">
     ### Префиксные деревья (trie)

     ![](prefix.png)
    </script></section>

    <section data-markdown><script type="text/template">
     ### Array Mapped Trie
     ![](naiv-hamt.svg)

     #### node as array && hash as index
    </script></section>

    <section data-markdown><script type="text/template">
     ### Bitmap Trick
     ![](hamt.svg)
    </script></section>

    <section data-markdown><script type="text/template">
     ### Persistence
     ![](persist.png)
     #### structure sharing & path copying
    </script></section>

    <section data-markdown><script type="text/template">
     #### Функции высших порядков

     ---

     можно передвать функции в функции
     и возвращать функции из функций
    </script></section>

    <section data-markdown><script type="text/template">
     ### Инструмент абстракции

     * передать алгоритм в алгоритм
     * сконструировать алгоритм

    </script></section>

    <section data-markdown><script type="text/template">
### Работа с коллекциями

```clojure
(map :name users) => ["nicola" "pavel" "marat"]

(filter odd? (range 10)) => [1 3 5 7 9]

(reduce + 0 (range 100)) => 100
(reduce * 1 (range 10)) => 10!

(->> coll
     (map inc)
     (filter odd)
     (take 5))

(take 5 (filter odd (map inc coll)))
```

    </script></section>

    <section data-markdown><script type="text/template">
     ### Middleware

     ```js
(defn handler [x] (/ 1 x))
(defn wrap [f]
  (fn [x]
    (if (< x 0) nil (f x))))

(def stack (wrap handler))
(stack 1) => 1
(stack 2) => 1/2
(stack 0) => null
     ```

chain of responsibility
    </script></section>

    <section data-markdown><script type="text/template">
     ### Transducers
     ```clojure
(reduce (fn [acc x] (+ acc x)) 0 [1 2 3 4])
(reduce (fn [acc x] (conj acc (+ x 1)) [] [1 2 3 4])

(def transducer
  (fn [f]
    (fn [acc c] (if cond (f acc c) acc))))


(def trans
 (-> (map inc) (filter odd?) (take 5)))

(trans (range 100)) => [1 3 5 7 9]
     ```

    </script></section>

 <section data-markdown>
  <script type="text/template">
## REPL driven development

```clojure
nREPL server started on 54903 port
> (start sys)
> (doc map)
> (inspect sys)
> (stop sys)
> (run-tests)
> (eval ...)
```

vim: [fireplace](https://github.com/tpope/vim-fireplace)
  </script>
</section>

    <section data-markdown><script type="text/template">
## Polymorphism

```clojure
(into [1 2] [3 4])
;=> [ 1 2 3 4]

(into {:a 1 :b 2} {:c 4})
;=> {:a 1 :b 2 :c 3}
```
    </script></section>


<section data-markdown><script type="text/template">
## (protocols)

```clojure
(defprotocol Speaker (say [this]))

(deftype Rubist [name]
  Speaker
  (say [this] "ruby"))

(deftype Clojurist [name]
  Speaker
  (say [this] "clojure"))

(for [x [(Rubyist "nicola") (Clojurist "nicola")]
  (say x))

```
</script></section>

 <section data-markdown>
  <script type="text/template">
## (multimethods)
```clojure
(defmulti encounter
  (fn [x y]
    [(:Species x) (:Species y)]))

(defmethod encounter
 [:Bunny :Lion] [b l]
 :run-away)

(defmethod encounter
 [:Bunny :Bunny] [b l]
 :sex)
```
  </script>
</section>

<section data-markdown>
<script type="text/template">
## Expression problem

* add new type with fixed behavior
* add behavior to existing type

![](exp1.gif)
![](exp2.gif)
</script>
</section>

<section data-markdown><script type="text/template">
## Expression problem

```clojure
(extend-protocol ICoerce

  Date
  (to-date-time [date]
    (from-date date))

  java.sql.Date
  (to-date-time [sql-date]
    (from-sql-date sql-date))

  java.sql.Timestamp
  (to-date-time [sql-time]
    (from-sql-time sql-time)))
```
</script></section>


    <section data-markdown><script type="text/template">
State & Identity

![](state.svg)
    </script></section>

    <section data-markdown><script type="text/template">
![](state2.jpg)
    </script></section>

    <section data-markdown><script type="text/template">
* atom (uncoord; sync)
* ref (coord; sync)
* agent (uncoord; async)
    </script></section>

    <section data-markdown><script type="text/template">
### atom

```clj
(def state (atom {}))

(deref state) ;; or @state

(swap! state (fn [old] (assoc old :key "val")))
@state

```
    </script></section>

    <section data-markdown><script type="text/template">
### agent

```clj
(def counter (agent 0))

@counter

(send counter inc)

;;(send counter (fn [old] (+ 1 old))

@counter ;; may be 1

```
    </script></section>

    <section data-markdown><script type="text/template">
### refs & STM

```clj
(def account-a (ref 1000))
(def account-b (ref 1000))

;; transaction
(dosync
  (alter account-a + 100)
  (alter account-b - 100))
```
    </script></section>

    <section data-markdown><script type="text/template">
### core.async (CSP)
![](corea1.png)
    </script></section>

    <section data-markdown><script type="text/template">
### core.async (CSP)
![](corea2.png)
    </script></section>


    <section data-markdown><script type="text/template">
### core.async
```clj
(let [c1 (upload "serious.jpg")
      c2 (upload "fun.jpg")
      c3 (upload "sassy.jpg")
      [res chan] (alts!! [c1 c2 c3 (timeout 20)])]
    (report res))
```
    </script></section>
    <section data-markdown><script type="text/template">
### Interop

```clj
(.toUpperCase "fred")
(.getName String)
(.-x (java.awt.Point. 1 2))
(System/getProperty "java.vm.version")
Math/PI
```
    </script></section>


    <section data-markdown><script type="text/template">
    ### Rich Hickey

    ![](rich.jpg)
    </script></section>

    <section data-markdown><script type="text/template">
    ### Rich Hickey

* Hammock Driven Development
* Simple Made Easy
* The Value of Values
* The Language of the System
* Design, Composition and Performance

[best hits](https://changelog.com/rich-hickeys-greatest-hits/)
    </script></section>

<section data-markdown>
<script type="text/template">
### Books
---
* [SICP](http://mitpress.mit.edu/sicp/full-text/book/book.html)
* [SICP in clojure](http://sicpinclojure.com/)
* [CTM](http://www.amazon.com/Concepts-Techniques-Models-Computer-Programming/dp/0262220695)
* [Clojure org](http://clojure.org/documentation)
* [Programming Clojure](http://pragprog.com/book/shcloj/programming-clojure)
* [Joy Of Clojure](http://joyofclojure.com/)
* ...
</script>
</section>

<section data-markdown>
<script type="text/template">
### Resources
---

* [Clojure Slack](https://clojurians.slack.com/messages)
* [Clojure Russia](https://plus.google.com/communities/114227952963737516047) G+
* [Clojure FB](https://www.facebook.com/groups/clojure.course/)
* [Clojure Koans](https://github.com/functional-koans/clojure-koans)
* [excercism.io](http://exercism.io/)
* [4clojure](https://www.4clojure.com/)
* [Cognicast](http://www.cognitect.com/podcast)
* [Planet of Clojure](http://planet.clojure.in/)
  </script>
</section>

    <section>
      <h3>Thx</h3>
      <hr/>
      <h2>Q?</h2>
    </section>
  </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

// Full list of configuration options available at:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: true,
progress: true,
history: true,
center: true,

transition: 'slide', // none/fade/slide/convex/concave/zoom

// Optional reveal.js plugins
dependencies: [
{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: 'plugin/zoom-js/zoom.js', async: true },
{ src: 'plugin/notes/notes.js', async: true }
]
});

</script>

</body>
</html>
